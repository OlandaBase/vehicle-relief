<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Olanda Base â€“ è»Šä¸¡ç›—é›£æ”¯æ´ã®ãŠé¡˜ã„ / Vehicle Theft Relief</title>
  <style>
    body { font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans JP","Yu Gothic",sans-serif; margin:0; color:#222; line-height:1.65; background:#fafafa; }
    header { padding: 1.5rem 1rem; background:#fff; border-bottom:2px solid #f26522; }
    .container{ max-width:1000px; margin:0 auto; padding:1rem; }
    h1,h2{ line-height:1.25; }
    .muted{ color:#666; } .small{ font-size:.95rem; }
    .btn{ padding:.4rem .7rem; border:1px solid #ccc; background:#fff; border-radius:6px; cursor:pointer; }
    .btn.active{ background:#222; color:#fff; border-color:#222; }
    .pill{ display:inline-block; padding:.25rem .6rem; border-radius:999px; background:#ebf5ff; color:#084298; border:1px solid #b6daff; font-size:.9rem; }
    .card{ background:#fff; border-radius:12px; padding:1rem 1.25rem; margin:1rem 0; box-shadow:0 1px 3px rgba(0,0,0,.06); }
    .grid{ display:grid; gap:1rem; grid-template-columns:1fr; } @media(min-width:900px){ .grid{ grid-template-columns:1.2fr .8fr; } }
    table{ border-collapse:collapse; width:100%; } th,td{ border:1px solid #e5e5e5; padding:.5rem; text-align:left; vertical-align:top; }
    .bank{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#f8f9fa; border:1px dashed #cfd4da; padding:.9rem; border-radius:8px; }
    .hidden{ display:none !important; }
    .progress-bar{ height:16px; background:#eee; border-radius:999px; overflow:hidden; border:1px solid #ddd; }
    .progress{ height:100%; width:0%; background:#2b8a3e; }
    ul{ margin:.4rem 0 .8rem 1.1rem; }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div style="display:flex; gap:.5rem; align-items:center; flex-wrap:wrap;">
        <span class="muted">Language / è¨€èª:</span>
        <button id="btn-ja" class="btn active">æ—¥æœ¬èª</button>
        <button id="btn-en" class="btn">English</button>
        <span style="flex:1"></span>
        <span class="muted">Currency / é€šè²¨:</span>
        <button id="btn-eur" class="btn active">EUR â‚¬</button>
        <button id="btn-jpy" class="btn">JPY Â¥</button>
      </div>
      <h1 class="ja">Olanda Base â€“ è»Šä¸¡ç›—é›£æ”¯æ´ã®ãŠé¡˜ã„</h1>
      <h1 class="en hidden">Olanda Base â€“ Vehicle Theft Relief</h1>
      <p class="muted small ja">è¢«å®³å±Šç•ªå·ï¼š<b id="pv-ja"></b>ï¼ˆãƒ•ãƒ©ãƒ³ã‚¹å›½å®¶æ†²å…µéšŠ / BTA Roussillonï¼‰</p>
      <p class="muted small en hidden">Police report ref: <b id="pv-en"></b> (Gendarmerie Nationale / BTA Roussillon)</p>
      <span class="pill ja">ç›®æ¨™é‡‘é¡ï¼š<b><span data-money="goal" data-eur="33825"></span></b></span>
      <span class="pill en hidden">Goal: <b><span data-money="goal" data-eur="33825"></span></b></span>
    </div>
  </header>

  <main class="container grid">
    <section class="card">
      <h2 class="ja">é€²æ—çŠ¶æ³</h2><h2 class="en hidden">Progress</h2>
      <div style="display:flex; gap:1rem; flex-wrap:wrap; align-items:center;">
        <div class="pill"><span class="ja">ç¾åœ¨ã®åˆè¨ˆï¼š</span><span class="en hidden">Raised:</span> <b><span data-money="raised"></span></b></div>
        <div class="pill"><span class="ja">æ”¯æ´è€…ï¼š</span><span class="en hidden">Supporters:</span> <b id="backers">0</b></div>
        <div class="pill"><span class="ja">é”æˆç‡ï¼š</span><span class="en hidden">Progress:</span> <b id="pct">0%</b></div>
      </div>
      <div class="progress-bar" style="margin:.7rem 0 0;"><div class="progress" id="bar"></div></div>
      <p class="muted small ja">â€» Googleã‚·ãƒ¼ãƒˆï¼ˆCSVå…¬é–‹ï¼‰ã®åˆè¨ˆã‚’è‡ªå‹•å–å¾—ã—ã¾ã™ã€‚æœªè¨­å®šæ™‚ã¯ 0% è¡¨ç¤ºã«ãªã‚Šã¾ã™ã€‚</p>
      <p class="muted small en hidden">* Automatically pulls totals from a published Google Sheet (CSV). If not set, displays 0%.</p>
    </section>

    <section class="card">
      <h2 class="ja">è¢«å®³ã®æ¦‚è¦</h2><h2 class="en hidden">Summary of Damages</h2>
      <p class="ja">
        2025å¹´10æœˆ8æ—¥ã€ãƒ•ãƒ©ãƒ³ã‚¹ãƒ»Salaise-sur-Sanne ã«ã¦ã€ãƒãƒ¼ãƒ è»Šä¸¡ <b>Iveco Daily</b> ã¨æ©ŸæãŒç›—é›£ã«é­ã„ã¾ã—ãŸã€‚
        åˆè¨ˆè¢«å®³é¡ã¯ <b><span data-money="totalloss" data-eur="67650"></span></b>ã€å½“é¢ã®ç›®æ¨™ã¯ãã®<strong>50%ï¼ˆ<span data-money="goal" data-eur="33825"></span>ï¼‰</strong>ã§ã™ã€‚
        ç‰¹ã« <b>è‡ªè»¢è»Š6å°ï¼ˆ1å° <span data-money="bike" data-eur="6000"></span>ï¼‰ï¼ <span data-money="biketotal" data-eur="36000"></span></b> ã®æå¤±ãŒç—›æ‰‹ã§ã™ã€‚
        æ­£ç›´ã€<b>æ‚”ã—ã•</b>ã¨<b>è…¹ç«‹ãŸã—ã•</b>ã¯æ¶ˆãˆã¾ã›ã‚“ãŒã€é¸æ‰‹ãŸã¡ã®æŒ‘æˆ¦ã‚’æ­¢ã‚ãªã„ãŸã‚ã«å‰ã‚’å‘ãã¾ã™ã€‚
      </p>
      <p class="en hidden">
        On 8 Oct 2025 in Salaise-sur-Sanne, France, our team vehicle (<b>Iveco Daily</b>) and equipment were stolen.
        The estimated total loss is <b><span data-money="totalloss" data-eur="67650"></span></b>; our immediate goal is
        <strong>50% (<span data-money="goal" data-eur="33825"></span>)</strong>. The biggest hit is
        <b>six race bikes (each <span data-money="bike" data-eur="6000"></span> â†’ total <span data-money="biketotal" data-eur="36000"></span>)</b>.
        We are frustrated and angry, but we keep going.
      </p>

      <h3 class="ja">å†…è¨³ï¼ˆæ¦‚ç®—ï¼‰</h3><h3 class="en hidden">Breakdown (est.)</h3>
      <table>
        <tr>
          <th class="ja">é …ç›®</th><th class="ja">æ•°é‡</th><th class="ja">é‡‘é¡</th>
          <th class="en hidden">Item</th><th class="en hidden">Qty</th><th class="en hidden">Amount</th>
        </tr>
        <tr>
          <td class="ja">è»Šä¸¡ï¼ˆIveco Dailyï¼‰</td><td>1</td><td><span data-money="v" data-eur="20000"></span></td>
          <td class="en hidden">Vehicle (Iveco Daily)</td><td class="en hidden">1</td><td class="en hidden"><span data-money="v" data-eur="20000"></span></td>
        </tr>
        <tr>
          <td class="ja">è‡ªè»¢è»Š</td><td>6</td><td><span data-money="biketotal" data-eur="36000"></span></td>
          <td class="en hidden">Bicycles</td><td class="en hidden">6</td><td class="en hidden"><span data-money="biketotal" data-eur="36000"></span></td>
        </tr>
        <tr>
          <td class="ja">æ©Ÿæãƒ»ç”¨å“ï¼ˆæ—¢çŸ¥ã®é‡‘é¡ï¼‰</td><td>â€“â€“</td><td><span data-money="equip_known" data-eur="6300"></span></td>
          <td class="en hidden">Equipment (known amounts)</td><td class="en hidden">â€“â€“</td><td class="en hidden"><span data-money="equip_known" data-eur="6300"></span></td>
        </tr>
        <tr>
          <td class="ja">æ©Ÿæãƒ»ç”¨å“ï¼ˆãã®ä»–ãƒ»ç¢ºèªä¸­ï¼‰</td><td>â€“â€“</td><td><span data-money="equip_tbd" data-eur="5350"></span></td>
          <td class="en hidden">Equipment (additional, being confirmed)</td><td class="en hidden">â€“â€“</td><td class="en hidden"><span data-money="equip_tbd" data-eur="5350"></span></td>
        </tr>
        <tr>
          <th class="ja">åˆè¨ˆ</th><th></th><th><span data-money="totalloss" data-eur="67650"></span></th>
          <th class="en hidden">Total</th><th></th><th class="en hidden"><span data-money="totalloss" data-eur="67650"></span></th>
        </tr>
      </table>
    </section>

    <aside class="card">
      <h2 class="ja">ãƒãƒ¼ãƒ ç´¹ä»‹ï¼ˆOlanda Baseï¼‰</h2><h2 class="en hidden">About Olanda Base</h2>
      <p class="ja">
        <b>Olanda Base</b> ã¯ã€ã‚ªãƒ©ãƒ³ãƒ€ã‚’æ‹ ç‚¹ã«æ—¥æœ¬ã¨æ¬§å·ã‚’ã¤ãªãè‡ªè»¢è»Šç«¶æŠ€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ã‚·ã‚¯ãƒ­ã‚¯ãƒ­ã‚¹ï¼ã‚°ãƒ©ãƒ™ãƒ«ï¼XCMï¼ãƒ‘ãƒ©ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚°ã«å–ã‚Šçµ„ã‚€é¸æ‰‹ã®
        <b>é å¾ã‚µãƒãƒ¼ãƒˆãƒ»æ©Ÿææ‰‹é…ãƒ»ãƒ™ãƒ¼ã‚¹é‹å–¶</b>ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚é¸æ‰‹ãŒæ¬§å·ã®ãƒ¬ãƒ¼ã‚¹ã‚’çµŒé¨“ã—ã€æˆé•·ã™ã‚‹ãŸã‚ã®â€œæ‹ ç‚¹ï¼ˆBaseï¼‰â€ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚
      </p>
      <p class="en hidden">
        <b>Olanda Base</b> is a Netherlands-based project connecting Japanese riders with European racing in CX, Gravel, XCM and Para-cycling.
        We provide a <b>base of operations, logistics, and equipment support</b> so athletes can race, learn and grow in Europe.
      </p>
      <ul class="ja">
        <li>æ´»å‹•æ‹ ç‚¹ï¼šã‚ªãƒ©ãƒ³ãƒ€</li>
        <li>ä¸»ãªã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼šã‚·ã‚¯ãƒ­ã‚¯ãƒ­ã‚¹ã€ã‚°ãƒ©ãƒ™ãƒ«ã€XCMã€ãƒ‘ãƒ©ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚°</li>
        <li>ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼šæ—¥æœ¬ã¨æ¬§å·ã®â€œè¡Œãæ¥â€ã‚’å½“ãŸã‚Šå‰ã«ã™ã‚‹</li>
      </ul>
      <ul class="en hidden">
        <li>Base: The Netherlands</li>
        <li>Focus: Cyclocross, Gravel, XCM, Para-cycling</li>
        <li>Mission: Make EUâ†”JP racing more accessible</li>
      </ul>
      <p class="small">å…¬å¼ã‚µã‚¤ãƒˆï¼š<a href="https://sites.google.com/view/olandabase/page" target="_blank" rel="noopener">Olanda Base Official</a></p>

      <h3 class="ja">å¯„ä»˜æ–¹æ³•ï¼ˆéŠ€è¡Œï¼Wiseï¼‰</h3><h3 class="en hidden">How to Donate (Bank / Wise)</h3>
      <h4 class="ja">ğŸ‡ªğŸ‡º Wiseï¼ˆæ¬§å·ã®æ–¹ã«ãŠã™ã™ã‚ï¼‰</h4><h4 class="en hidden">ğŸ‡ªğŸ‡º Wise (recommended for EU)</h4>
      <div class="bank">
        <div class="ja">
          <div><b>å—å–åç¾©:</b> OlandaBase</div>
          <div><b>IBAN:</b> BE86 9677 0222 0550</div>
          <div><b>BIC / SWIFT:</b> TRWIBEB1XXX</div>
          <div><b>é€é‡‘ç”¨é€”ï¼ˆReferenceï¼‰:</b> Vehicle Theft Relief</div>
          <div class="muted">éŠ€è¡Œåï¼šWise, Rue du TrÃ´ne 100, 3rd floor, Brussels, 1050, Belgium</div>
        </div>
        <div class="en hidden">
          <div><b>Account name:</b> OlandaBase</div>
          <div><b>IBAN:</b> BE86 9677 0222 0550</div>
          <div><b>BIC / SWIFT:</b> TRWIBEB1XXX</div>
          <div><b>Reference:</b> Vehicle Theft Relief</div>
          <div class="muted">Bank: Wise, Rue du TrÃ´ne 100, 3rd floor, Brussels, 1050, Belgium</div>
        </div>
      </div>

      <h4 class="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬å›½å†…æŒ¯è¾¼</h4><h4 class="en hidden">ğŸ‡¯ğŸ‡µ Japan bank transfer</h4>
      <div class="bank">
        <div class="ja">
          <div><b>éŠ€è¡Œå:</b> ä¸‰äº•ä½å‹éŠ€è¡Œï¼ˆSMBCï¼‰</div>
          <div><b>æ”¯åº—å:</b> 356</div>
          <div><b>ç¨®åˆ¥:</b> æ™®é€š</div>
          <div><b>å£åº§ç•ªå·:</b> 4742084</div>
          <div><b>åç¾©:</b> ã‚«ã‚¸ãƒ†ãƒ„ã‚­</div>
          <div><b>æŒ¯è¾¼ãƒ¡ãƒ¢:</b> ç›—é›£æ”¯æ´ï¼ˆãŠåå‰ä»»æ„ï¼‰</div>
        </div>
        <div class="en hidden">
          <div><b>Bank:</b> Sumitomo Mitsui Banking Corporation (SMBC)</div>
          <div><b>Branch:</b> 356</div>
          <div><b>Type:</b> Ordinary</div>
          <div><b>Account No.:</b> 4742084</div>
          <div><b>Account name:</b> ã‚«ã‚¸ãƒ†ãƒ„ã‚­</div>
          <div><b>Note:</b> â€œVehicle Theft Reliefâ€ + your name (optional)</div>
        </div>
      </div>
    </aside>
  </main>

  <footer><div class="container"><p class="muted small">&copy; <span id="year"></span> Olanda Base Team</p></div></footer>

  <script>
    // ====== CONFIG ======
    const POLICE_REF = "02800/03342/2025";
    const GOAL_EUR = 33825;
    const TOTAL_LOSS_EUR = 67650;
    const EUR_TO_JPY = 165; // è¡¨ç¤ºç”¨ãƒ¬ãƒ¼ãƒˆ
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/1-1KCbaKdikPAZHGne9EOaeolRPuAxkc7z8uLJDyrkzQ/edit?usp=drivesdk; "  // â† ã“ã“ã« Googleã‚·ãƒ¼ãƒˆã€Œã‚¦ã‚§ãƒ–ã«å…¬é–‹ï¼ˆCSVï¼‰ã€ã®URLã‚’è²¼ã‚‹
    // CSV æœŸå¾…åˆ—: date,amount,currency,donor,statusï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã¯ç„¡è¦–ï¼‰
    // status ãŒ OK / CONFIRMED / CONFIRM / PAID ã®è¡Œã ã‘åˆè¨ˆã—ã¾ã™

    // ====== Init text ======
    document.getElementById('pv-ja').textContent = POLICE_REF;
    document.getElementById('pv-en').textContent = POLICE_REF;
    document.getElementById('year').textContent = new Date().getFullYear();

    // ====== Language ======
    function setLang(lang){
      document.querySelectorAll('.ja').forEach(e=>e.classList.toggle('hidden', lang!=='ja'));
      document.querySelectorAll('.en').forEach(e=>e.classList.toggle('hidden', lang!=='en'));
      document.getElementById('btn-ja').classList.toggle('active', lang==='ja');
      document.getElementById('btn-en').classList.toggle('active', lang==='en');
      document.documentElement.lang = lang;
    }
    document.getElementById('btn-ja').onclick = ()=>setLang('ja');
    document.getElementById('btn-en').onclick = ()=>setLang('en');
    setLang('ja');

    // ====== Currency ======
    let ccy='EUR';
    function fmtEUR(n){ return 'â‚¬'+Math.round(n).toLocaleString('en-US'); }
    function fmtJPY(n){ return 'Â¥'+Math.round(n).toLocaleString('ja-JP'); }
    function toDisplay(n){ return ccy==='EUR' ? fmtEUR(n) : fmtJPY(n*EUR_TO_JPY); }
    function renderMoneyStatics(){
      document.querySelectorAll('[data-money]').forEach(el=>{
        const base = Number(el.getAttribute('data-eur')||0);
        el.textContent = toDisplay(base);
      });
    }
    document.getElementById('btn-eur').onclick = ()=>{ ccy='EUR'; document.getElementById('btn-eur').classList.add('active'); document.getElementById('btn-jpy').classList.remove('active'); renderMoneyStatics(); renderProgress(_eurSum,_backers); };
    document.getElementById('btn-jpy').onclick = ()=>{ ccy='JPY'; document.getElementById('btn-jpy').classList.add('active'); document.getElementById('btn-eur').classList.remove('active'); renderMoneyStatics(); renderProgress(_eurSum,_backers); };
    renderMoneyStatics();

    // ====== Progress (Sheet) ======
    let _eurSum = 0;
    let _backers = 0;

    function renderProgress(raisedEUR, backers){
      _eurSum = raisedEUR; _backers = backers || 0;
      const raisedEl = document.querySelector('[data-money="raised"]');
      if(raisedEl) raisedEl.textContent = toDisplay(raisedEUR);
      document.getElementById('backers').textContent = String(_backers);
      const pct = Math.min(100, Math.round((raisedEUR / GOAL_EUR) * 100)) || 0;
      document.getElementById('pct').textContent = pct + '%';
      document.getElementById('bar').style.width = pct + '%';
    }

    async function fetchSheet(){
      if(!SHEET_URL){ renderProgress(0,0); return; }
      try{
        const res = await fetch(SHEET_URL, {cache:'no-store'});
        const text = await res.text();
        const lines = text.trim().split(/\r?\n/);
        if(lines.length<=1){ renderProgress(0,0); return; }
        const header = lines.shift().split(',');
        const idx = {}; header.forEach((h,i)=>idx[h.trim().toLowerCase()] = i);
        const ai = idx['amount'], ci = idx['currency'], si = idx['status'];
        let eur = 0, count = 0;
        for(const line of lines){
          if(!line) continue;
          const cols = line.split(',');
          const raw = (cols[ai]||'').replace(/[^0-9.\-]/g,'');
          const amt = parseFloat(raw);
          const cur = (cols[ci]||'').trim().toUpperCase();
          const st  = (cols[si]||'').trim().toUpperCase();
          if(isNaN(amt) || amt<=0) continue;
          if(si!=null && st && !['OK','CONFIRMED','CONFIRM','PAID'].includes(st)) continue;
          if(cur==='EUR') eur += amt;
          else if(cur==='JPY') eur += amt / EUR_TO_JPY;
          count++;
        }
        renderProgress(eur, count);
      }catch(e){ console.error(e); renderProgress(0,0); }
    }
    fetchSheet();
    setInterval(fetchSheet, 10*60*1000); // 10åˆ†ã”ã¨ã«æ›´æ–°
  </script>
</body>
</html>
